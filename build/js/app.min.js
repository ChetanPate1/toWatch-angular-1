function CountdownCardController(t){function r(){return t.$getAuth()}this.loggedIn=r}function countdownCard(){return{templateUrl:"js/components/countdown-card/countdown-card.html",restrict:"E",controller:"CountdownCardController",controllerAs:"CountdownCtrl",transclude:!0,scope:{heading:"=",subheading:"=",imgsrc:"="}}}function NavigationBarController(t,r){function e(){return t.$getAuth()}function n(){t.$signOut(),r.go("home")}var o=this;o.userSignedIn=e,o.logout=n}function navigationBar(){return{templateUrl:"js/components/navigation-bar/navigation-bar.html",restrict:"E",controller:"NavigationBarController",controllerAs:"NavbarCtrl"}}function countdownTimer(t){function r(r,e){function n(t,r){var e=Math.abs(t-r);if(t-r<0)return[0,0,0,0];var n=Math.floor(e/a.day);e-=n*a.day;var o=Math.floor(e/a.hour)%a.hour;e-=o*a.hour;var i=Math.floor(e/a.minute)%a.hour;return e-=i*a.minute,[n,o,i,Math.floor(e)]}function o(t){var r={},e=["day","hour","min","sec"],n=0;for(n;n<4;n++)r[e[n].charAt(0)]={name:e[n],val:"0"+t[n]},t[n]>1&&t[n]<10&&(r[e[n].charAt(0)]={name:e[n]+"s",val:"0"+t[n]}),t[n]>9&&(r[e[n].charAt(0)]={name:e[n]+"s",val:""+t[n]});return r}var a={now:function(){return(new Date).getTime()/1e3},future:new Date(r.to).getTime()/1e3,day:86400,hour:3600,minute:60};t(function(){r.counter=o(n(a.future,a.now()))},1e3)}return{link:r,templateUrl:"js/components/countdown-timer/countdown-timer.html",restrict:"E",scope:{to:"="}}}function sideNavigation(){return{templateUrl:"js/components/side-navigation/side-navigation.html",restrict:"E"}}function config(t,r){t.state("home",{url:"/home",templateUrl:"templates/home.html",resolve:{currentAuth:["firebaseAuth",function(t){return t.$waitForSignIn()}]}}).state("signin",{url:"/signin",templateUrl:"templates/sign.html",controller:"SigninController",controllerAs:"SigninCtrl"}).state("watchlist",{url:"/watchlist",templateUrl:"templates/watchlist.html",controller:"WatchlistController",controllerAs:"WatchlistCtrl",resolve:{currentAuth:["firebaseAuth",function(t){return t.$requireSignIn()}]}}).state("shows",{url:"/shows",templateUrl:"templates/shows.html",controller:"ShowsController",controllerAs:"ShowsCtrl",resolve:{currentAuth:["firebaseAuth",function(t){return t.$requireSignIn()}]}}),r.otherwise("home")}function runBlock(t,r){t.$on("$stateChangeError",function(t,e,n,o,a,i){"AUTH_REQUIRED"===i&&r.go("signin")})}function firebaseArray(t){function r(r,e){var r=firebase.database().ref(r);return t(r).$add(e)}function e(){var r=firebase.database().ref();return t(r)}return{save:r,getAll:e}}function firebaseAuth(t){return t()}function ShowsController(t){function r(){var r={series:e.series,imgSrc:e.imgSrc,season:e.season,episode:{number:e.episodeNumber,seen:!1,airDate:e.airDate}};t.save("shows",r)}var e=this;e.shows=t.getAll(),e.add=r}function SigninController(t,r){function e(){n.email,n.password;t.$signInWithEmailAndPassword(n.email,n.password).then(function(t){r.go("watchlist")}).catch(function(t){console.log(t)})}var n=this;n.login=e}function WatchlistController(t,r){function e(){var t={from:n.from,content:n.content};r.save("user",t)}var n=this;n.data=r.getAll(),n.send=e}angular.module("app").controller("CountdownCardController",CountdownCardController),CountdownCardController.$inject=["firebaseAuth"],angular.module("app").directive("countdownCard",countdownCard),angular.module("app").controller("NavigationBarController",NavigationBarController),NavigationBarController.$inject=["firebaseAuth","$state"],angular.module("app").directive("navigationBar",navigationBar),angular.module("app").directive("countdownTimer",countdownTimer),countdownTimer.$inject=["$interval"],angular.module("app").directive("sideNavigation",sideNavigation),angular.module("app",["ui.router","firebase"]),angular.module("app").config(config),config.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").run(runBlock),runBlock.$inject=["$rootScope","$state"];var config={apiKey:"AIzaSyAKhpVyjLKR4d45XZ2ZcHTzC85R_H0bNAk",authDomain:"towatch-23983.firebaseapp.com",databaseURL:"https://towatch-23983.firebaseio.com",projectId:"towatch-23983",storageBucket:"towatch-23983.appspot.com",messagingSenderId:"767959575687"};firebase.initializeApp(config),angular.module("app").factory("firebaseArray",firebaseArray),firebaseArray.$inject=["$firebaseArray"],angular.module("app").factory("firebaseAuth",firebaseAuth),firebaseAuth.$inject=["$firebaseAuth"],angular.module("app").controller("ShowsController",ShowsController),ShowsController.$inject=["firebaseArray"],angular.module("app").controller("SigninController",SigninController),SigninController.$inject=["firebaseAuth","$state"],angular.module("app").controller("WatchlistController",WatchlistController),WatchlistController.$inject=["currentAuth","firebaseArray"];