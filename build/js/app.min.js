function countdownTimer(e){function r(r,t){function o(e,r){var t=Math.abs(e-r);if(e-r<0)return[0,0,0,0];var o=Math.floor(t/a.day);t-=o*a.day;var n=Math.floor(t/a.hour)%a.hour;t-=n*a.hour;var i=Math.floor(t/a.minute)%a.hour;return t-=i*a.minute,[o,n,i,Math.floor(t)]}function n(e){var r={},t=["day","hour","min","sec"],o=0;for(o;o<4;o++)r[t[o].charAt(0)]={name:t[o],val:"0"+e[o]},e[o]>1&&e[o]<10&&(r[t[o].charAt(0)]={name:t[o]+"s",val:"0"+e[o]}),e[o]>9&&(r[t[o].charAt(0)]={name:t[o]+"s",val:""+e[o]});return r}var a={now:function(){return(new Date).getTime()/1e3},future:new Date(r.to).getTime()/1e3,day:86400,hour:3600,minute:60};e(function(){r.counter=n(o(a.future,a.now()))},1e3)}return{link:r,templateUrl:"js/components/countdown-timer/countdown-timer.html",restrict:"E",scope:{to:"="}}}function countdownCard(){return{templateUrl:"js/components/countdown-card/countdown-card.html",restrict:"E",transclude:!0,scope:{heading:"=",subheading:"=",imgsrc:"=",countdownvisible:"="}}}function NavigationBarController(e,r){function t(){return e.$getAuth()}function o(){e.$signOut(),r.go("home")}var n=this;n.userSignedIn=t,n.logout=o}function navigationBar(){return{templateUrl:"js/components/navigation-bar/navigation-bar.html",restrict:"E",controller:"NavigationBarController",controllerAs:"NavbarCtrl"}}function RewatchCardController(e){function r(){t.open=!t.open}var t=this;t.open=!1,t.toggleOpen=r}function rewatchCard(){return{templateUrl:"js/components/rewatch-card/rewatch-card.html",restrict:"E",controller:"RewatchCardController",controllerAs:"RewatchCardCtrl",transclude:!0,scope:{heading:"=",subheading:"=",imgsrc:"="}}}function seasonInfo(){function e(e){function r(){e.open=!e.open}e.open=!1,e.toggleOpen=r}return{link:e,templateUrl:"js/components/season-info/season-info.html",restrict:"E",scope:{season:"=",rewatchobj:"=",index:"="}}}function ShowsCountdownCardController(e){function r(){t.open=!t.open}var t=this;t.open=!1,t.toggleOpen=r}function showsCountdownCard(){return{templateUrl:"js/components/shows-countdown-card/shows-countdown-card.html",restrict:"E",controller:"ShowsCountdownCardController",controllerAs:"ShowsCountdownCtrl",transclude:!0,scope:{heading:"=",subheading:"=",imgsrc:"=",seasoninfo:"="}}}function sideNavigation(){return{templateUrl:"js/components/side-navigation/side-navigation.html",restrict:"E"}}function config(e,r){e.state("home",{url:"/home",templateUrl:"templates/home.html",resolve:{currentAuth:["firebaseAuth",function(e){return e.$waitForSignIn()}]}}).state("signin",{url:"/signin",templateUrl:"templates/sign.html",controller:"SigninController",controllerAs:"SigninCtrl"}).state("watchlist",{url:"/watchlist",templateUrl:"templates/watchlist.html",controller:"WatchlistController",controllerAs:"WatchlistCtrl",resolve:{currentAuth:["firebaseAuth",function(e){return e.$requireSignIn()}]}}).state("rewatch",{url:"/rewatch",templateUrl:"templates/rewatch.html",controller:"RewatchController",controllerAs:"RewatchCtrl",resolve:{currentAuth:["firebaseAuth",function(e){return e.$requireSignIn()}]}}).state("shows",{url:"/shows",templateUrl:"templates/shows.html",controller:"ShowsController",controllerAs:"ShowsCtrl",resolve:{currentAuth:["firebaseAuth",function(e){return e.$requireSignIn()}]}}),r.otherwise("home")}function runBlock(e,r){e.$on("$stateChangeError",function(e,t,o,n,a,i){"AUTH_REQUIRED"===i&&r.go("signin")})}function firebaseArray(e){function r(r,t){var r=firebase.database().ref(r);return e(r).$add(t)}function t(r){var r=firebase.database().ref(r);return e(r)}function o(){var r=firebase.database().ref();return e(r)}return{save:r,getByRef:t,getAll:o}}function firebaseAuth(e){return e()}function RewatchController(e,r,t){function o(){var e={showId:l.seriesIndex,currentSeason:"1",show:n(l.shows[l.seriesIndex].seasons)};r.save(s,e)}function n(e){for(var r=a(e),t=1;t<=r;t++){seasonsSize=a(e["season_"+t]);for(var o=1;o<=seasonsSize;o++)e["season_"+t][o].watched=!1}return e}function a(e){var r=0;for(var t in e)e.hasOwnProperty(t)&&++r;return r}function i(e){for(var r=a(e),t=0,o=1,n=1;n<=r;n++){seasonsSize=a(e["season_"+n]);for(var i=1;i<=seasonsSize;i++)!0===e["season_"+n][i].watched&&++t==seasonsSize&&(console.log("seasonsSize "+seasonsSize),o++),console.log(e["season_"+n][i].watched,"watched "+t)}console.log("onSeason "+o)}var l=this,s="rewatch/"+e.uid;l.rewatch=r.getByRef(s),l.shows=r.getByRef("shows"),l.add=o,t(function(){var e=l.rewatch[1].show;console.log(e),i(e)},1e3)}function ShowsController(e){function r(){e.save("shows",gen)}var t=this;t.shows=e.getByRef("shows"),t.add=r}function SigninController(e,r){function t(){o.email,o.password;e.$signInWithEmailAndPassword(o.email,o.password).then(function(e){r.go("watchlist")}).catch(function(e){console.log(e)})}var o=this;o.login=t}function WatchlistController(e,r){function t(){var e={seriesId:o.series,watched:!1};r.save(n,e)}var o=this,n="watchlist/"+e.uid;o.watchlist=r.getByRef(n),o.shows=r.getByRef("shows"),o.add=t}angular.module("app").directive("countdownTimer",countdownTimer),countdownTimer.$inject=["$interval"],angular.module("app").directive("countdownCard",countdownCard),angular.module("app").controller("NavigationBarController",NavigationBarController),NavigationBarController.$inject=["firebaseAuth","$state"],angular.module("app").directive("navigationBar",navigationBar),angular.module("app").controller("RewatchCardController",RewatchCardController),RewatchCardController.$inject=["firebaseAuth"],angular.module("app").directive("rewatchCard",rewatchCard),angular.module("app").directive("seasonInfo",seasonInfo),angular.module("app").controller("ShowsCountdownCardController",ShowsCountdownCardController),ShowsCountdownCardController.$inject=["firebaseAuth"],angular.module("app").directive("showsCountdownCard",showsCountdownCard),angular.module("app").directive("sideNavigation",sideNavigation),angular.module("app",["ui.router","firebase"]),angular.module("app").config(config),config.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").run(runBlock),runBlock.$inject=["$rootScope","$state"];var config={apiKey:"AIzaSyAKhpVyjLKR4d45XZ2ZcHTzC85R_H0bNAk",authDomain:"towatch-23983.firebaseapp.com",databaseURL:"https://towatch-23983.firebaseio.com",projectId:"towatch-23983",storageBucket:"towatch-23983.appspot.com",messagingSenderId:"767959575687"};firebase.initializeApp(config),angular.module("app").factory("firebaseArray",firebaseArray),firebaseArray.$inject=["$firebaseArray"],angular.module("app").factory("firebaseAuth",firebaseAuth),firebaseAuth.$inject=["$firebaseAuth"],angular.module("app").controller("RewatchController",RewatchController),RewatchController.$inject=["currentAuth","firebaseArray","$timeout"],angular.module("app").controller("ShowsController",ShowsController),ShowsController.$inject=["firebaseArray"],angular.module("app").controller("SigninController",SigninController),SigninController.$inject=["firebaseAuth","$state"],angular.module("app").controller("WatchlistController",WatchlistController),WatchlistController.$inject=["currentAuth","firebaseArray"];