function countdownCard(){return{templateUrl:"js/components/countdown-card/countdown-card.html",restrict:"E",transclude:!0,scope:{heading:"=",subheading:"=",imgsrc:"=",countdownvisible:"="}}}function countdownTimer(r){function t(t,e){function n(r,t){var e=Math.abs(r-t);if(r-t<0)return[0,0,0,0];var n=Math.floor(e/a.day);e-=n*a.day;var o=Math.floor(e/a.hour)%a.hour;e-=o*a.hour;var i=Math.floor(e/a.minute)%a.hour;return e-=i*a.minute,[n,o,i,Math.floor(e)]}function o(r){var t={},e=["day","hour","min","sec"],n=0;for(n;n<4;n++)t[e[n].charAt(0)]={name:e[n],val:"0"+r[n]},r[n]>1&&r[n]<10&&(t[e[n].charAt(0)]={name:e[n]+"s",val:"0"+r[n]}),r[n]>9&&(t[e[n].charAt(0)]={name:e[n]+"s",val:""+r[n]});return t}var a={now:function(){return(new Date).getTime()/1e3},future:new Date(t.to).getTime()/1e3,day:86400,hour:3600,minute:60};r(function(){t.counter=o(n(a.future,a.now()))},1e3)}return{link:t,templateUrl:"js/components/countdown-timer/countdown-timer.html",restrict:"E",scope:{to:"="}}}function NavigationBarController(r,t){function e(){return r.$getAuth()}function n(){r.$signOut(),t.go("home")}var o=this;o.userSignedIn=e,o.logout=n}function navigationBar(){return{templateUrl:"js/components/navigation-bar/navigation-bar.html",restrict:"E",controller:"NavigationBarController",controllerAs:"NavbarCtrl"}}function RewatchCardController(r){function t(){e.open=!e.open}var e=this;e.open=!1,e.toggleOpen=t}function rewatchCard(){return{templateUrl:"js/components/rewatch-card/rewatch-card.html",restrict:"E",controller:"RewatchCardController",controllerAs:"RewatchCardCtrl",transclude:!0,scope:{heading:"=",subheading:"=",imgsrc:"="}}}function seasonInfo(){return{templateUrl:"js/components/season-info/season-info.html",restrict:"E"}}function ShowsCountdownCardController(r){function t(){e.open=!e.open}var e=this;e.open=!1,e.toggleOpen=t}function showsCountdownCard(){return{templateUrl:"js/components/shows-countdown-card/shows-countdown-card.html",restrict:"E",controller:"ShowsCountdownCardController",controllerAs:"ShowsCountdownCtrl",transclude:!0,scope:{heading:"=",subheading:"=",imgsrc:"=",seasoninfo:"="}}}function sideNavigation(){return{templateUrl:"js/components/side-navigation/side-navigation.html",restrict:"E"}}function config(r,t){r.state("home",{url:"/home",templateUrl:"templates/home.html",resolve:{currentAuth:["firebaseAuth",function(r){return r.$waitForSignIn()}]}}).state("signin",{url:"/signin",templateUrl:"templates/sign.html",controller:"SigninController",controllerAs:"SigninCtrl"}).state("watchlist",{url:"/watchlist",templateUrl:"templates/watchlist.html",controller:"WatchlistController",controllerAs:"WatchlistCtrl",resolve:{currentAuth:["firebaseAuth",function(r){return r.$requireSignIn()}]}}).state("rewatch",{url:"/rewatch",templateUrl:"templates/rewatch.html",controller:"RewatchController",controllerAs:"RewatchCtrl",resolve:{currentAuth:["firebaseAuth",function(r){return r.$requireSignIn()}]}}).state("shows",{url:"/shows",templateUrl:"templates/shows.html",controller:"ShowsController",controllerAs:"ShowsCtrl",resolve:{currentAuth:["firebaseAuth",function(r){return r.$requireSignIn()}]}}),t.otherwise("home")}function runBlock(r,t){r.$on("$stateChangeError",function(r,e,n,o,a,i){"AUTH_REQUIRED"===i&&t.go("signin")})}function firebaseArray(r){function t(t,e){var t=firebase.database().ref(t);return r(t).$add(e)}function e(t){var t=firebase.database().ref(t);return r(t)}function n(){var t=firebase.database().ref();return r(t)}return{save:t,getByRef:e,getAll:n}}function firebaseAuth(r){return r()}function RewatchController(r,t){function e(){i.open=!i.open}function n(){var r={showId:i.seriesIndex,currentSeason:"1",show:o(i.shows[i.seriesIndex].seasons)};t.save(l,r)}function o(r){for(var t=a(r),e=1;e<=t;e++){seasonsSize=a(r["season_"+e]);for(var n=1;n<=seasonsSize;n++)r["season_"+e][n].watched=!1}return r}function a(r){var t=0;for(var e in r)r.hasOwnProperty(e)&&++t;return t}var i=this,l="rewatch/"+r.uid;i.open=!1,i.rewatch=t.getByRef(l),i.shows=t.getByRef("shows"),i.add=n,i.toggleOpen=e}function ShowsController(r){function t(){r.save("shows",gen)}var e=this;e.shows=r.getByRef("shows"),e.add=t}function SigninController(r,t){function e(){n.email,n.password;r.$signInWithEmailAndPassword(n.email,n.password).then(function(r){t.go("watchlist")}).catch(function(r){console.log(r)})}var n=this;n.login=e}function WatchlistController(r,t){function e(){var r={seriesId:n.series,watched:!1};t.save(o,r)}var n=this,o="watchlist/"+r.uid;n.watchlist=t.getByRef(o),n.shows=t.getByRef("shows"),n.add=e}angular.module("app").directive("countdownCard",countdownCard),angular.module("app").directive("countdownTimer",countdownTimer),countdownTimer.$inject=["$interval"],angular.module("app").controller("NavigationBarController",NavigationBarController),NavigationBarController.$inject=["firebaseAuth","$state"],angular.module("app").directive("navigationBar",navigationBar),angular.module("app").controller("RewatchCardController",RewatchCardController),RewatchCardController.$inject=["firebaseAuth"],angular.module("app").directive("rewatchCard",rewatchCard),angular.module("app").directive("seasonInfo",seasonInfo),angular.module("app").controller("ShowsCountdownCardController",ShowsCountdownCardController),ShowsCountdownCardController.$inject=["firebaseAuth"],angular.module("app").directive("showsCountdownCard",showsCountdownCard),angular.module("app").directive("sideNavigation",sideNavigation),angular.module("app",["ui.router","firebase"]),angular.module("app").config(config),config.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").run(runBlock),runBlock.$inject=["$rootScope","$state"];var config={apiKey:"AIzaSyAKhpVyjLKR4d45XZ2ZcHTzC85R_H0bNAk",authDomain:"towatch-23983.firebaseapp.com",databaseURL:"https://towatch-23983.firebaseio.com",projectId:"towatch-23983",storageBucket:"towatch-23983.appspot.com",messagingSenderId:"767959575687"};firebase.initializeApp(config),angular.module("app").factory("firebaseArray",firebaseArray),firebaseArray.$inject=["$firebaseArray"],angular.module("app").factory("firebaseAuth",firebaseAuth),firebaseAuth.$inject=["$firebaseAuth"],angular.module("app").controller("RewatchController",RewatchController),RewatchController.$inject=["currentAuth","firebaseArray"],angular.module("app").controller("ShowsController",ShowsController),ShowsController.$inject=["firebaseArray"],angular.module("app").controller("SigninController",SigninController),SigninController.$inject=["firebaseAuth","$state"],angular.module("app").controller("WatchlistController",WatchlistController),WatchlistController.$inject=["currentAuth","firebaseArray"];